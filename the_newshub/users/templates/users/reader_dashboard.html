{% extends "base.html" %}
{% block title %}My Dashboard{% endblock %}
{% block content %}
<div class="container my-4">
    <h2 class="mb-4">Welcome, {{ user.full_name }}</h2>

    <h4 class="mb-3">Publication Subscriptions</h4>
    {% if publication_subs %}
        <ul class="list-group mb-4">
            {% for sub in publication_subs %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ sub.publication.name }}
                    <form method="post" action="{% url 'unsubscribe_publication' sub.publication.pk %}">
                        {% csrf_token %}
                        <button class="btn btn-sm btn-outline-danger">Unsubscribe</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">You aren't subscribed to any publications.</p>
    {% endif %}

    <h4 class="mb-3">Journalist Subscriptions</h4>
    {% if journalist_subs %}
        <ul class="list-group">
            {% for sub in journalist_subs %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ sub.journalist.full_name }}
                    <form method="post" action="{% url 'unsubscribe_journalist' sub.journalist.pk %}">
                        {% csrf_token %}
                        <button class="btn btn-sm btn-outline-danger">Unsubscribe</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">You aren't following any journalists.</p>
    {% endif %}
</div>
{% endblock %}